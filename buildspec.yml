version: 0.2

phases:
  install:
    runtime-versions:
      docker: 18
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - docker login -u AWS -p eyJwYXlsb2FkIjoiVEwxbENibzNpWFUwV2NseUg3VGVQTU95WkdxcHNvWHNSUWNCSUhuZVU0SVltUzlrVGN2TVpHUzFOK1RCb2xKMzAzUzYvTzRIdndWaFVUcEZTWHZpT21OUU85VzRCWmxnRDdMQytGTUpOK1p0aU5sOG85RHJ3RzdqVWVhcWc5Mm42RFhqbmZuOSs4MDdEN1J3WUxFVDdia1g1d0hIdFZkQk1qVXJDSUswZEZqNENNamt3YzJ4RTNBTlEySUhYcWk1dXY5SE5HM0I1YVJzVTI5Q0xYTGJFL1F5bHRaUnAxU09wOTlnVmRQRVFjb0E2aHpwQm9XN3d4ZHppZTdmYzVOQXg0VHRpZFh6QWtGV254blppVmFZcDU2Qmg5enNLQVJWWDM3d2VGdkYwRmdqbml5UEdZNTFVQTJFd0xHTnhRNUJvSjJsd3NFZFd6YS91RGsxTWRBQ3U5K1F0SGR1YmxiMFJkOXhvcmZ3eWNSQzN1WjNHNzgra0FBaC9ULzBjcndkL2JyT2lBNncwOEEvSEN3RElkZkpZTmgwL0RWaitKWTNwYURJejhBM3RCd1BIb0tXeWZ0OE95SGgybmFVUHpNL0FPZmg4WmtlU3J5TUF4WHBwdmQwK2sxNEVVeU1nNDlZb000UjZDWXFWNys5ZGVDT254VHRTUWQ1RXJLMEk3VEx6VEhXdVR3THBZZXhMdDVqbkZOdi9yMmZ4SHB3NU56MTJqMDRlVTR2TDRDcFNTblh1OUE3RHR2cGRyRG5hYytyQmtBUVoxZHFtMDJaRDZLaGJ1ZGhLWXNzbGxRdHpIcHFYQmRNQnlPcFY5VklRc2lWMFNUZUo2MlVadG9yTzEzL21JVzNGOWk3UUZHSnJmbGJwc2VZcjd2dTZScDNYZXgwZkNjTFQ5WE5Pc1pyUlBhRkVyM1VPbWp6TDYzZ1ltWUQwUVhISDg2M0lsaC8xZmNEVUtiZU10dEFxSElmajZab2hFSEg1WHVvS29DQlY1ZlhLSDkvTGEwMDdxVE9KOTd5QkpJWUMrTWF3UHRSWkxSY0R5UTlwM29saDE3KzlybFBBcHF3dG83YlNibHhHZTlwNUw4a3A4V25kYkpTQnJ6U0JqVUtiOGxGVFYyTGJkdUlKbXZ4Tnk0MVB3dFQ3Q1VXSDE1aDdGVnpRTTVQQ0x2c0hmbGFJdkl1WUNHNkhoUTVxOWozZmgzNlZTUGFIaW54cVhPWUFXSnVEb2ZNckZCeWxoVldVc0xzNGRIMFZWY3NlWWFZVTd1SzM1NUMyZHkvMWVUa1ptRmRjN082VTBRWllZOExIMjFhOTNmM1ZuY0hrbnZwTXh5M29oUVRlOVhMZmc4SVJ1d1BEZlduOU12TmRqNVQzYTVHQU9ZQ3BySEd2YXlTZWR3L3BFeW9jem0xMXJqVmt5M0hibUlBWXI3elliMVk2K1BDIiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURCUmhiOUQvWVUwMkxZM1lZUUlCRUlBN2hHdnVKaTE4aWFjekxBTGlJRE1GSXdWYXFYdENrenNLMlFiTmJVVytJWXRkb1E0MXhMaURHS0RQWmZsYkZuUmZEYWxhYnhYWHB4NEtaTTQ9IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNTY3MjMxNjg0fQ== https://223998089108.dkr.ecr.us-east-1.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...          
      - docker build -t glcapstoneairpg .
      - docker tag glcapstoneairpg:latest 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest     
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest