version: 0.2

phases:
  install:
    runtime-versions:
      docker: 18
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - docker login -u AWS -p eyJwYXlsb2FkIjoiM0NuWmRaV1czSHFyR0c4S2xZL1ViUFE2a3ZLbWo2ekZoQVBmMEpHbUVZUWVsakVJRGE1QWpJZGtCQTJqZ25VV2FOeU1HOHR1UXJyWFo2NEhXZm9tVDBMRkNrNXNzNEs5RTVGK2gzdkJtRGNOMkVtNHB6Tk15bXdkbkNMdWswWW8zUE1nWVVGRjg0R04rc0NERGNPSWVaZUpPd3lvMmYyc3l5NDRIRElRNWx1OGZKZXRORkNwSElZbk1XdXpIRHVPMkZpY3gvTG03Uldhcm1xQnRFbUNmSEw2V1JqeXJVcFB6M0MvRm04dkRzUklhVmdvSWEvMm9RM3RRRXdFNmdFelVjOTR2T0JkSXJwUFUwZzFFWUptcklZd0R1L2xKZ2pjRysxRldNekZSSllDRzBLRnZ1M00wZWVRQ0xKc1d5a1BtYzBuRTdNUEttUEhacmlNZWpVSzRsMCtFQjlDcmZkVFFxaUF1Y1RCTTBGSVdRdzFlL1NuMUthTkIyS2E3N0VERDkzbkRlS3V0UDNQVkZpbllIMExBNnF3MUtOeXpsaEx5MzhCTXVwQ29oamNBMUczVHNERnI4WnQxakJseVAwOU1tRVlhMHZmVVR3L0JsNEl2TGc4bStDejBPTCtNTnFKUHZ1RnpOcEdJYlc4Y2FUelRHT0U3Ylo5ajRLbEdkbXIxRjhjVE14aUZSRVIwMi8xN1ZqUFhPS045c0JwLzZNZ0YzUXZWcmFaU01oNytYeC91YjFPVFptVzlyREhTb1psUzFvRkhBTGhLYnN0TTkxRG8zUHNjZ2RLTmM0MHBjemozek82bUJraWVnYWw5MEI0Qzhwa0oxWE9VU0xtZ3orSkFyTmZjYktwUmxhNjZNTEtkb1h6VzF4OE1sZ0c0cW96SXpndnFaZk85cVExK21RS0VaT1RMbGNYSkhSelRsSVFtaXp2bXAzaldPVDczeC9jNiswTytwenErNTI4OUZDd1ZhekRoS0NTZXBuWk5ITFZTNklRWUp4R0N1MkRML2ZaUmlsTTZWU0prZ1oxOEpkaDZyaXN6Rjk0R0FsUThnbFhBRXJla3BrVkVmcXBvNWFDekdxc0FUZk1zRGtTbjJyY1FOUGovVHVjVHpHT3o3MTNNRDJKR0lZZGY5UWJJOWYvU291dzNFZUo1aVVqVU5RZ0dDMjhoTlB5NjU3cUc1NDhIRjhiMnIxb0doODRmRHExK04zYjZUMFFBY2dEMjk3dkM3Y0hyY2hiTEJ6SnkvODcvRDlQVlFRQXd5NVdlY0ZLNm5DQTRsUzBrVHF2ODErcVpRcFFYOGJJMDhXZ3FySTlVQ2tuSHIyRmphTVBycGxuam1oMlpCN2J4SUhhNnhkeW5mUjdJUHo5NVRGNlErbWFmTUZqc3UvUXdvOFhSdUhKNGVkMk5PcU5jcGFYR29pdk05Vy9MME1nIiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURQc3hSc0FOK0NHSHBZelg1d0lCRUlBN0lDZlBLRlpTZk0ybUdEcEhRZXoyRGt6bmpvVkdpaGplMlJwNnNDekw4RThyNkFXcmRxaTVlMVNBODB1MW1lLzI1bTJKWVRnMnVoV01lV2c9IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNTY2NjMyMTI3fQ== https://223998089108.dkr.ecr.us-east-1.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...          
      - docker build -t glcapstoneairpg .
      - docker tag glcapstoneairpg:latest 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest     
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest