version: 0.2

phases:
  install:
    runtime-versions:
      docker: 18
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - docker login -u AWS -p eyJwYXlsb2FkIjoibXlvdy91SWdMWlJVMERwMitZODZjTmRRcEsreUlBUWgwMlFFRGRlS2NzVk9MZERoMjB0V29vNDZYZGQ2b0RERVg2VzZqY3I3cERYcVNXTW85dHNQMUgvbnZrZDhzRS9DbHZISXh3MTNocHE4ZURaTmZYc1JVTGRMM1Z4d05OVUZDQXhSSmZRM2NneEdYOXo4anFwZm9HVTVHVGhMOUROS1lBUVJLWVhpb1pxTnlKL3l3ZDRpWUVGQ0Q0cEFXSjFlYnYxV0EzdzhyRDVQK0xsTGEzT3YvSFd1K2RveWhvSFV0UmNHRlJTa3JRSytiMittSkRUT2VxTS8yZjlMaDZ4REM4bHdkTHE3eHBWR0RqYWREem9ZTkxNUFRXS2NUcEVmZGZVUkorRWZFS1lxY3FjNzRKeTdDRjZVQ1BpZ3dRbFRZUWxhK2RVMXcrRERVUGVMc2ZMUTVjb0EzWGcrMzJ2a2x4UmRtMkZwQjB4Y1pWT3FBdnljay93SjBKQkIyeG1TRmdZMlZKT3VkaU9jUEEzbm82Z0s1b1ZDejhNYUIrUDJtbWlZUXBUaXRuM0Y4d1YrRndBQjIzd0hFbjZNRExibWM1ZVV1aGRZMzhiMmJtMndCVWx5c09rWHFIQVc5c09YcmdxUzB5SlRtRjB0WXBLdnpSRXE1MmtnMC9ZdFFzR1ZDS010MDBnTUJBd3RPbVVvdzQ2d3ROa1BKVGxxMVFTc1BUclB2d1UzaS9BTG5DV1lzYjhIUEFQd2p5d25DMllJcnBlOGEyR0R2NGgvRjhsMDRNbFU2VitVSXhNaG1hYkVOYnVtUTFIVlJiNjNlSUd2YlVweTZlTjY5bWNOcGJuaDJNalF5a3dITTY5cWdlT2JUMEI3UlJoQW45bnY5NFNTc3IvRWtyZ2F6ODhMcGhjQnZTMnVsQjQ1QzJwWlMxNVdoUzJnOC92YkxpQWxFTkpyZmUzcUFVb05xU2ROSThzOHdicUF1N2o2WnRkWnAxbXRpY1lxblYrWG8razc2eldMRnc0V0xsZmpSY1ZSY0ZCclZXcHFiZ1A2YzRVdDh6OWZhcXphRThvV0tyNzlzYzZPbFlDakxqYVZoUVIrd3NkMlJqSmxSVERBVVZseEp1NkFRZU9JYVRZRVpnak4zOExPOE0vaUp0MHFlb2ZtMUQzR0FDdGdQMXFCdkliUjN2dm4vYkl5VTRldkF5RUM1NkFZZFUxbzhZRlNhUkxHcDIyQThPS2ZmSFB4QmxWdjRxOXJRcU1sd1dWZjYrejJyZE5KZjRtdk1vWno0a0RiM2VidEthUitPRHBJZ041SFBBdU5Sdk1KZXY2SEIrRElFUTYwUVlmZmxTRlo0U0tWMDZtSGFwZDhIeXBBQ3QvOUYrS3p0WFhOd1VIRXE0c0MxNWtEMGxOR3hnMktNd0RYK0JMOXNEc0NOY1VYR3NSTVF1WTVha0hDRUN2diIsImRhdGFrZXkiOiJBUUVCQUhod20wWWFJU0plUnRKbTVuMUc2dXFlZWtYdW9YWFBlNVVGY2U5UnE4LzE0d0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVET05WNXh3cHdvY1hnNnRaL1FJQkVJQTcrTVE5NjJyMGtBYldnazRFQ2NiNmF1NFRnSmRVVk5jdm9sbzl0SE5zamxoOGIvZCs4MmJRd2RvMUdlREZ3My9Db0FKeEtCSThaczZCQ2RVPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTU2NjA5MTc5MH0= https://223998089108.dkr.ecr.us-east-1.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...          
      - docker build -t glcapstoneairpg .
      - docker tag glcapstoneairpg:latest 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest     
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest