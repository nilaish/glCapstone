version: 0.2

phases:
  install:
    runtime-versions:
      docker: 18
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - docker login -u AWS -p eyJwYXlsb2FkIjoiclFxb3V4WGE1ZVpnb21WVEtSOGVsd1o1YW9oRnZSSEs3dEs5SkpCK1hzVWZBZEQ2RmN0R0NMZzFsNVc5RUxFcURpM2xrcytQOUY5dnV2MGhmenpWaFFSekx4Nmh3ZzJDYzNjMWNmWUJRL3hub1p5S3R3b1VtMS9pc2I2cWE3eC8rSXBBUnU4dXpiYXEwQ0JvYVpEd3BNQXFlY1dSNlFrSWdQTU80c1ZXR3d4SURlVjVzSnNpcS9SSk5pUlNRN3VBMmF6MHl4L1VRZVdDM0w5YUhFQXBoQ29JdWZ0WDQ4TlNyZWYrNldaUkl2dG4xT25zY1VDZDI0YlZWMUxWbUFBeHpuWU5SZjRCWHlwRE5mQWNOalhWVVdlKzhqOUJVYkpMN0hvSFNxdGZFU2VsczZYb2RwY1NueU15UVZITFhIbkVvYjkyWjg2Z0EwZGZFSXF6TmpVeGF6S1Q1MlQvZnVoN1E1bHpkV0didzBNUTFvZzhScVBkcnFJY1BBYUtJV0F1c0dZRzlIMmQ3Ym5HMFhGU2NZcUFpMTRlTVM4WWc1dVRxV00vMmZxN21ZU2V2d0o2NGRiUjdCSlRFZlVQdHoyR2dxSWxCQnVjRmdRV1ErV2djakYrZ3dXTXNzRWI2QU1ESE0xbHZXbDF0amlQL0t6OGVwTnZSdk1SeHFDaTNIMy84eHdGbGN2MmxUWDh2eFNNeWFsU2hROTBzNHRreFpucldSU1g5d2JISHdZcXlhU25ucU1UM05lbU9hM09FZHNXVG5mcFppNHJMcGFibG93NTE5VjBPOUFRQWJOU2VJUzlac0E0ODdMUHBzejdWeW8wRHcvRTFEb2djTVlzemlLamdxY0dUc3M4WW9nV0diaXRGTmc1b252cXRObFUwZHlkZ21NUDMzNHBnejVCWkk1cDA5VXN5WjUyNWQ2czJzTmRIQWdEcHE2WGlUL0V5dFQ2WG1pSWw0blZ5RkYyS0NkR0tYL2Y3ZXdkbklsUWt1NHRvNy91TnNGbmg3cjV5dTRHMkFjMGdtLzNrNGlrdGhJcmpSMFBSQVVueXo3VmN3NjhhT3JEOE1rRGpWWU42V0xYc2trZ2RkWENFQlR4MlViRnRkY1p4R1lQeTNOb29Obmh1WnNvV1QvSjFlRTBBSFhBd1pOS3NORFVLK1c0ejN2TkVuZlB1NjBSekFvSk5kWnlhOSs0bFlLRStaUDVJQXBPRHEyV0xqREtXWnNCVFdUYVVvWWFGL3ZtZk8zYXdGclJZQ2w3U1YyYlNGM1NEWjhRLzNOK05JQWtSNE80YjdsQUhieWhrYjRFVHpObzBTZFRSSTlrbERoMWg5NGhnclFhVXFZSndWM0tFZmtlQmg3MzY3N3QxOWhMbmdBRElIVFYzblpGclhQYnNjY1p0UnRaVStmYlNiVEYrOXFicDJoYU42SWdEaExoV3dUZWc4TkxtbG5HdjFHTSIsImRhdGFrZXkiOiJBUUVCQUhod20wWWFJU0plUnRKbTVuMUc2dXFlZWtYdW9YWFBlNVVGY2U5UnE4LzE0d0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVERmY0UFMxbnQ3NUw1UjJsOFFJQkVJQTdzbFRVQTk2U2tYV0R2ZEdNdzJma2JSekV1ZTlNU010S1NFL1p6a21NS1VtVDNFblZIYXgwRysrQy9EaS8wQ000TVg0bm9EeEV0RnBPengwPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTU2Njg2MjQ2NX0= https://223998089108.dkr.ecr.us-east-1.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...          
      - docker build -t glcapstoneairpg .
      - docker tag glcapstoneairpg:latest 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest     
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest