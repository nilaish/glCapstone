version: 0.2

phases:
  install:
    runtime-versions:
      docker: 18
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - docker login -u AWS -p eyJwYXlsb2FkIjoiTDhOa1FxMUtxZlYyMjlRci9EejZwZkZsSGZ0TFlZMytyZ3NkNVZ5OU04MW5FS1lyMWpvZGhtYWpnK3ROMElGSG9oK1BVelY1TkJCcFNMNEE1QlVYS1IyMnFVdHp2aEwxcUVzQmJoaUd0VEZmVEQ3K05QeHh2dGxwaXF0aU5wMGd6WlZ0N1FiSmZCRENzM00vMFhBSUtnUzdZQTVVNjNYUDNTdFZCOTV1UW0xRndGU0JzSytudUVjVDRVVmgzUkVJK3dSbVA3WTlaRXhleEFGZnhuT1p5WVB4WkNFOHNSNHBhLzVZdUhxdFlLUTkwTSt2eXllOFAzdHE5RWV6Wk1tMXdMVjBIOVFjd2c4d3MwQXFieEhHbjdxVHFaMmhDSjBuUjJVc2xvY3NDQnBkdnpTK21STlRIeEs0Ris2Q09nZng0L01ZaFRuV0tzT2g0LzBxUUhuaVhYNVI1ZFpUbjVsNDlMY3lsM0I4clpyTlB5bkNUUmdHdUtLa0ZCZkxjS3VLQ2hiUUdlVkZXS1ZjQ3FPVFplakdpL2NuTWpoNHNrM3RXV252ckxuZW5sN2licmpoU3phYmNORzI4M3BSek1CUzB5U0IweXQ3dHpzbDNESStHSkNLU0IyZUlNaDU3Wk5XcXBiY2lCY0hFdnhmQ2tJVkhrdllUWWxzMTJlejJIT21ZR25vK3JKNENkRkhyaE5UM0hrWS81TmF1NHl2QmliTE95bzdudjR0b2lsdFAwT1I1aUdyWUZtOWZFc05Va0pPbk0zeEZERlZCemZHZGVOTS9EdzhPcE91RDdCQ2FDMmlhQkxsQ2tLZVB1dTN3aWl4NXd2LzFLd3FwekdzZmc4bkt6aXA3aTJNN1psQ0JFdEFjSEgxZDNqUmZ6b0lrT1cwcEtjd3Z0VDM2Rko1S0wwMENRQkhRQ2drZGQ3NWFtMnZURGQ4MTN3NjU2KzRVZEJFVXZ5ZFNFVWdnNzNQMFBSVUNIeHQxcDlhRHhiRHJKdlJjTkowUCt5YU9pUldnOWVqcTdGc0JtTjRJNllVcDd4cTl1Y1RLd205OGcvY1ZzaldyYmtSREZhSkZtaEw2VDRCMHoyZ0JCcGdzU2t0OE1qWUpwYkM5RFg3Vndnd2RpN0JtR0hlK3l2dHZDTGY3RlVpM2hRcy85aEJsemRHbUEvNG8vYWJUOXRhY3NObSsyS05OcGxlUFFTczBVdzQ3QzgxTFlaQlF5S2MyU0NxWXRINlRLZHhXTGEyaWJ0U1VXWlNIUHlNM3FTRHBtTUlVWWNrL1dzSGprbjQ0YmFPc1ZLcFBhV1NydGJmOTh2VDVSdUdZaXpWeEVWY0hRRGxReDdXSU1xVWY1RUJaNU1TTGsxb3N6RElyZ2grTFJEZ1dhZ3ZVendrT0FnVTAvd1lPOG9LWlp6U0pSTkxsVmUzQVhUdDFFK0hsOTBJZll5aXFxN1hueFE9IiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURBWU5zbHhmTjZCOE04Y3BGUUlCRUlBN05rbjVrem1zUnZEMmpHSU5KeFVDYjB3NUNkUXRqbzdCam9oT0I3VHEzeGRUSVI4Qy9WeEZNTS9BSEZrSTQwMDhPbzl4Yk8xVHZ0VHBRUk09IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNTY3MTA1OTEyfQ== https://223998089108.dkr.ecr.us-east-1.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...          
      - docker build -t glcapstoneairpg .
      - docker tag glcapstoneairpg:latest 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest     
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest